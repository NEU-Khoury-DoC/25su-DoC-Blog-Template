---
title: "Phase 3 Individual Deliverable"
date: 2025-06-05
draft: false
description: "The individual blog post for phase 3 of what I contributed"
slug: "sophiephase3"   # if you use, needs to be different for every post
tags: ["authors", "config", "docs"]
authors:
  - "sophiefarrell"
showAuthorsBadges : false
---
## Project Phase 3

### Routes
I started this phase by working on the /locations GET route, which gets all of the locations from the DaycareLocations table. I had a LOT of trouble with this at one. First I had issues with connecting our database to the API, which was partially my fault because I didn't update the DB_NAME in the .env file. I also had issues with connecting to the database because there were typos in the SQL file. My next issue was with the fact that the DaycareLocations table used time attributes, which JSON does not like. I ended up asking Emily Moy for help and she showed me her code from the spring when her project ran into the same issues. She is credited in the comments where her code is used. Because of the way that I ended up fixing the time issue, I also ran into issues when trying to implement this route on the Business Planning page. When I called the names of the attributes, I kept on getting errors that it didn't know what I was looking for. This is because I had to call them by the names I had given them in the route, not the names they had in the table (ex: Daycare ID vs daycare_id). In other routes, I had kept the name the same as it was in the table, so this confused me for a while. Another issue I ran into with this route is when I added daycare_name to the table after I created the route. I tried adding the attribute to both the route and the business planning page, but it never showed up when I called a GET request and the page errored out because it couldn't find daycare_name. Turns out this was because the blueprint had been duplicated at some point, so there were two different files that had the route in it but the one that I wasn't updating was the one that was registered as a blueprint. I fixed this and now name shows up. 

I also created the /locations POST route, which adds a new location to DaycareLocations and was far easier to make in my opinion. Implementing it ran into a similar number of issues. I created an Add New Daycare Location page, but I keep running into errors when trying to actually add it. I decided that for the sake of time I would wait until Phase 4 to fix it. I believe it is the types of inputs that I decided to use that are causing trouble, not the route itself since the route works when tested with Postman. 

Next I worked on the /locations/{daycare_id} PUT route, which updates the hours of a daycare location and/or the monthly price. This was another one that was simlpe to make, though I haven't tried to implement it with a page yet so there's still time for issues to come up. I did make the inputs on the page, but I haven't connected them to the route yet. 

I also worked on the /locations/{daycare_id} DELETE route, which will take the given daycare location and add it to a DeletedDaycareLocations table before removing it from the DaycareLocations table. This route gave me a lot of issues since initially I wanted to have a attribute that would mark the location as inactive instead of just getting rid of it entirely, but this caused issued with the other routes. Looking back, this may stem from the issue of the duplicated blueprints, but it might also be unrelated. Either way, giving the deleted locations their own table was much simpler and I was running out of time. I may go back and change this route to mark a location as inactive instead of another table if that truly was the issue, but as of now this is what the route does. I have not started trying to implement this yet, not even by adding a delete button to the business planning page. I will do this in Phase 4. 

I also created the /groups GET route that gets all the affinity resources that can be seen by Eura Peon. It also should filter by resource type, country, and focus area. This was honestly easy to make since it was similar to the /locations GET route, and I also started implementing it with the resource page for Eura Peon. Everything comes up fine, but the filters currently do not work. I will be working on this during Phase 4, but in the interest of time I was satisfied that the resources were even appearing at all. 

I worked on the /groups POST route as well, which adds a new resource to the AffinityResources table. This was also very similar to the /locations POST route so it was not difficult to make. Postman testing shows that the route works, though I have not begun making a page in the app to implement it. 

I worked on the /policy GET route which gets all of the legislation from the Policies table that will be seen in the legislation finder page used by Paul E. Tishian. This will also be able to be filtered by country, focus area, and year. This route was also simple to make since it is similar to my other GET routes, though I may run into the same issues I am with the /groups GET route when I try to implement the filters in a page.

 I created the /policy POST route as well, which was another route that was familiar to make. Maybe I was just getting the hang of making routes by this time, I don't know. I haven't tried to implement it yet, so we'll see if I run into the same issues as I am with the /locations POST route. 

In addition, I created the /weeklyhours GET route and the /expenditure GET route. These routes were the first to use real data instead of mock data, so I was a little worried they would be more difficult. Luckily, I just changed the query from SELECT * to select the specific attributes I wanted since these tables had far more (ex: the EUEMployment table has a different attribute for the different kinds of workers such as full time, part time, self-employed, contributing family workers, etc.). I have not implemented them in a page yet, but I do not anticipate issues. I suppose we will see when the time comes. 


### Mock Data
Aside from routes, I also worked on creating the mock data for the project. Right now we have three csv files with mock data: one for daycare locations, one for legislation, and one for affinity resources. These were slightly difficult to make since Mockaroo didn't exactly have data types for legislation or daycare names or any other number of things. I ended up using custom lists and their generative ai feature to make some of the column's values, though this took trial and error with prompt engineering to get it to work. This worked fine for something like the name of a daycare, but I ended up having to get rid of the legislation having a description since there was no way Mockaroo would be able to accurately describe the fake law based on custom lists. Additionally, I had to keep names of the resources and laws somewhat vague so that the focus areas (ex: single mothers, daycare grants, etc) would match the name of the law. Initially I was getting a row along the lines of "Single Mother Support Group" that had a focus area of working parents, whereas a focus area of single mothers would make more sense. The legislation data still somewhat has this issue, but the law names are far more vague where a "Parental Support Act" could realistically have a focus area of social protection reporting. I have not added the data from the csv files into the SQL database yet since I anticipate maybe changing some of the table's attributes still (ex: adding an inactive attribute for daycare locations) and it will be easier to do with the data still out of the way. 

### Data Model
While working on the routes, I also ended up changing some of the tables we have for the mock data to fit more closely with what we had in mind for each user's pages. I created the DaycareLocations table for business planning instead of the previous tables of BusinessPlanning, GeneralLogistics, and OperatingHours. Those tables still exist in our database for now in case we do end up using them in some other way, but as of right now I anticipate them not being in our final project after Phase 4. Additinally I created the Policies table instead of just PolicyAnalysis and PolicyDetails. It really replaces PolicyDetails by including attributes that are actually in our mock data. For now the old tables still exist but once again I anticipate us getting rid of them. Fianlly, I created the AffinityResources table, which holds the resources that Eura Peon can access to find affinity groups and charities in any country she chooses to move to. This table was not in our original plans, which was an oversight on our part. 

### Streamlit
Additionally, I also worked on some of the streamlit for the pages of our app (though inarguably John did the most for this). I already sort of touched on this above, but I created the Business Planning Page for the Cara Day persona. In her home page, I added a button for the business planning page, as well as made the other buttons on her page just write that a page was coming soon instead of leading to an unrelated page. Within the Business Planning page, I figured out how to make the three buttons it has (See current location, research, and add a new location) side by side instead of on top of each other using columns. I ran into an issue here because since the buttons were in columns, anything I put in the if button pressed statement would also be reduced to the size of the columns, and I wanted the locations of the daycares to be able to take up the entire page below the buttons. I solved this by using booleans, which was really simple for the amount of time it took me to think of it. Additionally, I wanted the add new location button to show the form on the same page after it was pressed, but I couldn't see the errors unless it was on a new page for some reason. I keep the fact that there is a Add New Location page or go back to my original idea after I get the form working. 

For Eura Peon, I updated the "Resource" button on her home page to switch to a resource finder page that I made. It is very similar to the process that happens on Cara's business planning page when you click "See current locations" except it's on it's own page and includes filters. The filters currently don't work; the drop downs show the correct values, but they don't actually do the filtering correctly or at all in some cases. I wasn't very focused on them when making the page, so this will be a fix for Phase 4. Additionally I made the "Daycare Finder" redirect to a page that is essentially a daycare finder. I did not create this page, but I saw it and thought that this was a good place for it. 

For Paul E. Tishian, all I did was make the "Resource Page" button on his page write "Page coming soon!" when pressed so it didn't redirect to a random page. 

I also changed the sidebar navigation. Before, the page links didn't correspond to the buttons on each user's homepage, and if they did sometimes they would switch to a completely different page. I fixed this by only including links for the pages we had created, not all that we had planned, and by ensuring each page link went to the correct page. 